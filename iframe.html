<!doctype html>
<ol id="results"></ol>
<script>
window.onload = function domReady() {
  // listen for events coming from chrome
  window.addEventListener('WebChannelMessageToContent', function(e) {
    console.log('message from chrome received in iframed page: ' + JSON.stringify(e.detail));
    if (e.detail.message && e.detail.message.type == 'autocomplete-search-results') {
      // ok, we got this list of results. render em.
      var resultsContainer = document.getElementById('results');
      var resultsText = '';
      e.detail.message.data.forEach(function(result) {
        resultsText += '<li style="list-style-type:none" class="result">' +
                         '<h3>' + result.title + '</h3>' + 
                         '<p>' + result.url + '</p></li>';
      });
      resultsContainer.innerHTML = resultsText;
    }
  });
};
</script>
